<!-- driver/document_review.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>การตรวจสอบเอกสารคนขับรถ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/0.7.4/tailwind.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://kit.fontawesome.com/541087f5af.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://npmcdn.com/flatpickr/dist/l10n/th.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.0/fullcalendar.min.css">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/locale/th.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.0/fullcalendar.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/html5-qrcode@2.0.9/dist/html5-qrcode.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Charm:wght@400;700&family=K2D:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
    <!-- Lightbox CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css">
</head>
<body>
<h1 class="text-3xl font-bold text-center mt-10">การตรวจสอบเอกสารคนขับรถ</h1>

<div class="mb-4 border-b border-gray-200 dark:border-gray-700 mx-10">
    <ul class="flex flex-wrap -mb-px text-sm font-medium text-center" id="default-styled-tab"
        data-tabs-toggle="#default-styled-tab-content"
        data-tabs-active-classes="text-purple-600 hover:text-purple-600 dark:text-purple-500 dark:hover:text-purple-500 border-purple-600 dark:border-purple-500"
        data-tabs-inactive-classes="dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300"
        role="tablist">
        <li class="me-2" role="presentation">
            <button class="inline-block p-4 border-b-2 rounded-t-lg focus:bg-transparent focus:outline-none"
                id="profile-styled-tab" data-tabs-target="#styled-profile" type="button" role="tab"
                aria-controls="profile" aria-selected="false">รออนุมัติ</button>
            <span class="badge badge-primary mx-2">{{ no_of_pending_request }}</span>
        </li>
        <li class="me-2" role="presentation">
            <button class="inline-block p-4 border-b-2 rounded-t-lg focus:bg-transparent focus:outline-none"
                id="dashboard-styled-tab" data-tabs-target="#styled-dashboard" type="button" role="tab"
                aria-controls="dashboard" aria-selected="false">อนุมัติแล้ว</button>
        </li>
        <li class="me-2" role="presentation">
            <button
                class="inline-block p-4 border-b-2 rounded-t-lg hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300 focus:bg-transparent focus:outline-none"
                id="settings-styled-tab" data-tabs-target="#styled-settings" type="button" role="tab"
                aria-controls="settings" aria-selected="false">ปฏิเสธ</button>
        </li>
    </ul>
</div>

<div id="default-styled-tab-content">
    <div class="hidden p-4 rounded-lg bg-gray-50 dark:bg-gray-800 mx-10" id="styled-profile" role="tabpanel"
        aria-labelledby="profile-tab">
        <div class="overflow-x-auto">
            <table class="min-w-full bg-white">
                <thead class="bg-gray-100">
                    <tr>
                        <th class="py-2 px-4 border-b">ลำดับ</th>
                        <th class="py-2 px-4 border-b">ชื่อ</th>
                        <th class="py-2 px-4 border-b">วันที่ส่ง</th>
                        <th class="py-2 px-4 border-b">บัตรประชาชน/ใบขับขี่</th>
                        <th class="py-2 px-4 border-b">สำเนาทะเบียนรถ</th>
                        <th class="py-2 px-4 border-b">คนขับคู่กับรถ</th>
                        <th class="py-2 px-4 border-b">หมายเหตุ</th>
                        <th class="py-2 px-4 border-b">สถานะ</th>
                        <th class="py-2 px-4 border-b">ดำเนินการ</th>
                    </tr>
                </thead>
                <tbody>
                    {% for document in documents %}
                    {% if document.request_status == "Pending" %}
                    <tr class="bg-gray-50 border-b">
                        <th scope="row" class="px-4 py-2 text-center font-medium text-gray-900">{{forloop.counter}}</th>
                        <td class="px-5 py-4 text-center">{{document.driver_name}}</td>
                        <td class="px-5 py-4 text-center">{{document.submission_date}}</td>
                        <td class="px-5 py-4 text-center">
                            <a href="C:\Users\veerachot\rice-harvest-schedule\rice_harvest_schedule\บัตรประชาชน.jpg" data-lightbox="document-{{forloop.counter}}">
                                <img src="C:\Users\veerachot\rice-harvest-schedule\rice_harvest_schedule\บัตรประชาชน.jpg" alt="บัตรประชาชน/ใบขับขี่" class="w-32 h-auto rounded-lg border">
                            </a>
                        </td>
                        <td class="px-5 py-4 text-center">
                            <a href="C:\Users\veerachot\rice-harvest-schedule\rice_harvest_schedule\สำเนาทะเบียนรถ.jpg" data-lightbox="document-{{forloop.counter}}">
                                <img src="C:\Users\veerachot\rice-harvest-schedule\rice_harvest_schedule\สำเนาทะเบียนรถ.jpg" alt="สำเนาทะเบียนรถ" class="w-32 h-auto rounded-lg border">
                            </a>
                        </td>
                        <td class="px-5 py-4 text-center">
                            <a href="C:\Users\veerachot\rice-harvest-schedule\rice_harvest_schedule\คนขับ.jpg" data-lightbox="document-{{forloop.counter}}">
                                <img src="C:\Users\veerachot\rice-harvest-schedule\rice_harvest_schedule\คนขับ.jpg" alt="คนขับยืนคู่กับรถ" class="w-32 h-auto rounded-lg border">
                            </a>
                        </td>
                        <td class="px-5 py-4 text-center">
                            <form method="post" action="{% url 'process_document' document.id %}">
                                {% csrf_token %}
                                <textarea name="note" rows="3" class="w-full border rounded-lg p-2" placeholder="กรอกหมายเหตุถ้ามี..."></textarea>
                        </td>
                        <td class="px-5 py-4 text-center">{{document.request_status}}</td>
                        <td class="px-5 py-4 text-center">
                            <div class="flex space-x-2">
                                <button type="submit" name="action" value="approve" class="bg-green-500 hover:bg-green-700 font-bold py-2 px-4 rounded">อนุมัติ</button>
                                <button type="submit" name="action" value="decline" class="bg-red-500 hover:bg-red-700 font-bold py-2 px-4 rounded">ปฏิเสธ</button>
                            </div>
                            </form>
                        </td>
                    </tr>
                    {% endif %}
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="hidden p-4 rounded-lg bg-gray-50 dark:bg-gray-800 mx-10" id="styled-dashboard" role="tabpanel"
        aria-labelledby="dashboard-tab">
        <div class="overflow-x-auto">
            <table class="min-w-full bg-white text-sm">
                <thead class="bg-gray-100">
                    <tr>
                        <th class="py-2 px-4 border-b">ลำดับ</th>
                        <th class="py-2 px-4 border-b">ชื่อ</th>
                        <th class="py-2 px-4 border-b">วันที่ส่ง</th>
                        <th class="py-2 px-4 border-b">บัตรประชาชน/ใบขับขี่</th>
                        <th class="py-2 px-4 border-b">สำเนาทะเบียนรถ</th>
                        <th class="py-2 px-4 border-b">คนขับคู่กับรถ</th>
                        <th class="py-2 px-4 border-b">หมายเหตุ</th>
                        <th class="py-2 px-4 border-b">สถานะ</th>
                    </tr>
                </thead>
                <tbody>
                    {% for document in documents %}
                    {% if document.request_status == "Approved" %}
                    <tr class="bg-gray-50 border-b">
                        <th scope="row" class="px-4 py-2 text-center font-medium text-gray-900">{{ forloop.counter }}</th>
                        <td class="px-5 py-4 text-center">{{ document.driver_name }}</td>
                        <td class="px-5 py-4 text-center">{{ document.submission_date }}</td>
                        <td class="px-5 py-4 text-center">
                            <a href="C:\Users\veerachot\rice-harvest-schedule\rice_harvest_schedule\บัตรประชาชน.jpg" data-lightbox="document-{{ forloop.counter }}">
                                <img src="C:\Users\veerachot\rice-harvest-schedule\rice_harvest_schedule\บัตรประชาชน.jpg" alt="บัตรประชาชน/ใบขับขี่" class="w-32 h-auto rounded-lg border">
                            </a>
                        </td>
                        <td class="px-5 py-4 text-center">
                            <a href="C:\Users\veerachot\rice-harvest-schedule\rice_harvest_schedule\สำเนาทะเบียนรถ.jpg" data-lightbox="document-{{ forloop.counter }}">
                                <img src="C:\Users\veerachot\rice-harvest-schedule\rice_harvest_schedule\สำเนาทะเบียนรถ.jpg" alt="สำเนาทะเบียนรถ" class="w-32 h-auto rounded-lg border">
                            </a>
                        </td>
                        <td class="px-5 py-4 text-center">
                            <a href="C:\Users\veerachot\rice-harvest-schedule\rice_harvest_schedule\คนขับ.jpg" data-lightbox="document-{{ forloop.counter }}">
                                <img src="C:\Users\veerachot\rice-harvest-schedule\rice_harvest_schedule\คนขับ.jpg" alt="คนขับยืนคู่กับรถ" class="w-32 h-auto rounded-lg border">
                            </a>
                        </td>
                        <td class="px-5 py-4 text-center">{{ document.note }}</td>
                        <td class="text-green-500 font-bold text-center">{{ document.request_status }}</td>
                    </tr>
                    {% endif %}
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="hidden p-4 rounded-lg bg-gray-50 dark:bg-gray-800 mx-10" id="styled-settings" role="tabpanel"
        aria-labelledby="settings-tab">
        <div class="overflow-x-auto">
            <table class="min-w-full bg-white text-sm">
                <thead class="bg-gray-100">
                    <tr>
                        <th class="py-2 px-4 border-b">ลำดับ</th>
                        <th class="py-2 px-4 border-b">ชื่อ</th>
                        <th class="py-2 px-4 border-b">วันที่ส่ง</th>
                        <th class="py-2 px-4 border-b">บัตรประชาชน/ใบขับขี่</th>
                        <th class="py-2 px-4 border-b">สำเนาทะเบียนรถ</th>
                        <th class="py-2 px-4 border-b">คนขับคู่กับรถ</th>
                        <th class="py-2 px-4 border-b">หมายเหตุ</th>
                        <th class="py-2 px-4 border-b">สถานะ</th>
                    </tr>
                </thead>
                <tbody>
                    {% for document in documents %}
                    {% if document.request_status == "Declined" %}
                    <tr class="bg-gray-50 border-b">
                        <th scope="row" class="px-4 py-2 text-center font-medium text-gray-900">{{ forloop.counter }}</th>
                        <td class="px-5 py-4 text-center">{{ document.driver_name }}</td>
                        <td class="px-5 py-4 text-center">{{ document.submission_date }}</td>
                        <td class="px-5 py-4 text-center">
                            <a href="C:\Users\veerachot\rice-harvest-schedule\rice_harvest_schedule\บัตรประชาชน.jpg" data-lightbox="document-{{ forloop.counter }}">
                                <img src="C:\Users\veerachot\rice-harvest-schedule\rice_harvest_schedule\บัตรประชาชน.jpg" alt="บัตรประชาชน/ใบขับขี่" class="w-32 h-auto rounded-lg border">
                            </a>
                        </td>
                        <td class="px-5 py-4 text-center">
                            <a href="C:\Users\veerachot\rice-harvest-schedule\rice_harvest_schedule\สำเนาทะเบียนรถ.jpg" data-lightbox="document-{{ forloop.counter }}">
                                <img src="C:\Users\veerachot\rice-harvest-schedule\rice_harvest_schedule\สำเนาทะเบียนรถ.jpg" alt="สำเนาทะเบียนรถ" class="w-32 h-auto rounded-lg border">
                            </a>
                        </td>
                        <td class="px-5 py-4 text-center">
                            <a href="C:\Users\veerachot\rice-harvest-schedule\rice_harvest_schedule\คนขับ.jpg" data-lightbox="document-{{ forloop.counter }}">
                                <img src="C:\Users\veerachot\rice-harvest-schedule\rice_harvest_schedule\คนขับ.jpg" alt="คนขับยืนคู่กับรถ" class="w-32 h-auto rounded-lg border">
                            </a>
                        </td>
                        <td class="px-5 py-4 text-center">{{ document.note }}</td>
                        <td class="text-red-500 font-bold text-center">{{ document.request_status }}</td>
                    </tr>
                    {% endif %}
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Lightbox JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox.min.js"></script>

</body>
</html>
