<!-- profile_driver.html -->
{% extends "base.html" %}
{% load static %}
{% block title %}
    Update Profile - Driver
{% endblock %}
{% block main %}
    <div class="flex justify-center items-center h-screen">
        <div class="bg-white rounded-lg shadow-lg p-8 max-w-md w-full mx-auto justify-center">
            <div class="form">
                <h2 class="text-center text-2xl font-semibold mb-6">ข้อมูลส่วนตัว</h2>
                <form method="POST" id="profile-form">
                    {% csrf_token %}
                    <label for="first_name" class="block mb-2">ชื่อ :</label>
                    <input type="text" id="first_name" name="first_name" placeholder="ชื่อ" value="{{ user.first_name }}"
                        required
                        class="w-full px-4 py-2 border border-gray-300 rounded-md mb-4 focus:outline-none focus:border-emerald-600"
                        disabled>

                    <label for="last_name" class="block mb-2">นามสกุล :</label>
                    <input type="text" id="last_name" name="last_name" placeholder="นามสกุล" value="{{ user.last_name }}"
                        required
                        class="w-full px-4 py-2 border border-gray-300 rounded-md mb-4 focus:outline-none focus:border-emerald-600"
                        disabled>

                    <label for="address" class="block mb-2">ที่อยู่ :</label>
                    <input type="text" id="address" name="address" placeholder="ที่อยู่" value="{{ user.address }}" required
                        class="w-full px-4 py-2 border border-gray-300 rounded-md mb-4 focus:outline-none focus:border-emerald-600"
                        disabled>

                    <label for="phone" class="block mb-2">เบอร์ :</label>
                    <input type="text" id="phone" name="phone" placeholder="เบอร์" value="{{ user.phone }}" required
                        class="w-full px-4 py-2 border border-gray-300 rounded-md mb-4 focus:outline-none focus:border-emerald-600"
                        disabled>

                    <label for="email" class="block mb-2">E-mail :</label>
                    <input type="email" id="email" name="email" placeholder="E-mail" value="{{ user.email }}" required
                        class="w-full px-4 py-2 border border-gray-300 rounded-md mb-4 focus:outline-none focus:border-emerald-600"
                        disabled>

                    <div class="flex justify-between">
                        <button type="button" id="edit-button"
                            class="bg-yellow-500 text-white py-2 px-4 rounded-md hover:bg-yellow-700 transition duration-300">
                            แก้ไข
                        </button>
                        <button type="button" id="cancel-button" class="bg-red-500 text-white py-2 px-4 rounded-md hover:bg-red-700 transition duration-300 hidden">
                            ยกเลิก
                        </button>
                        <button type="submit" id="submit-button" disabled
                            class="bg-emerald-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition duration-300">
                            ยืนยัน
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script>
        document.getElementById('edit-button').addEventListener('click', function() {
            var form = document.getElementById('profile-form');
            var inputs = form.querySelectorAll('input');
            inputs.forEach(function(input) {
                input.disabled = false;
            });
            document.getElementById('submit-button').disabled = false;
            document.getElementById('edit-button').classList.add('hidden');
            document.getElementById('cancel-button').classList.remove('hidden');
        });

        document.getElementById('cancel-button').addEventListener('click', function() {
            var form = document.getElementById('profile-form');
            var inputs = form.querySelectorAll('input');
            inputs.forEach(function(input) {
                input.disabled = true;
            });
            document.getElementById('submit-button').disabled = true;
            document.getElementById('edit-button').classList.remove('hidden');
            document.getElementById('cancel-button').classList.add('hidden');
        });
    </script>
{% endblock %}
